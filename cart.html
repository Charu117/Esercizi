<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="cart.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARRELLO</title>
    
</head>
<body>
    <div class="wrapper">
        <div>
            <!--img class="img" src="https://img.icons8.com/ios/50/000000/shopping-cart.png"/-->
            <button class="waves-effect waves-light btn" id="showCart">VISUALIZZA IL CARRELLO</button>
            <button class="waves-effect waves-light btn">SVUOTA IL CARRELLO</button>
        </div>
        <table id="list"></table>
    </div>
            <div id="popupCart" class="popupCart card">
                <div class="head">
                    
                    <div class="title">
                        <h5>SHOPPING CART</h5>
                    </div>
                    <span id="close">
                        <i class="material-icons x">cancel</i>
                    </span>
                       <table id="cart"></table>
                </div>
            </div>
           
    <script>
        
        var modal = document.getElementById("popupCart");
        var visualizza = document.getElementById("showCart");
        var close = document.getElementById("close");

        var products = [[1,'images/book.jpg',"WAR AND PEACE", "19,99€"],
                        [2,'images/book2.jpg',"Song of Solomon", "15,99€"], 
                        [3,'images/book3.jpg',"ULYSSES", "16,99€"]];
        
       
        visualizza.addEventListener('click', function(){
            modal.style.display = "block";
        })
        close.addEventListener('click', function(){
            modal.style.display = "none";
        })
       
            var table = document.getElementById("list");
           
            products.forEach(row => {
                var tr = document.createElement("tr");
                var image = document.createElement("img");
                var btn = document.createElement("button");
                var title = document.createElement("h5");
                var price = document.createElement("h5");

                var tdImg = document.createElement("td");
                var tdTitle = document.createElement("td");
                var tdPrice = document.createElement("td");
                var tdBtn = document.createElement("td");

                btn.classList.add("waves-effect", "waves-light", "btn", "red");

                var textTitle = document.createTextNode(row[2]);
                var textPrice = document.createTextNode(row[3]);
                var btnText = document.createTextNode("ADD TO CART")

                
                image.src = row[1];
                tdImg.appendChild(image);

                title.appendChild(textTitle);
                tdTitle.appendChild(title);

                price.appendChild(textPrice);
                tdPrice.appendChild(price);

                btn.addEventListener('click', function(){
                    addCart(row);
                    btn.classList.add("disabled");
                })
                btn.appendChild(btnText);
                tdBtn.appendChild(btn);
               
                tr.appendChild(image);
                tr.appendChild(tdTitle);
                tr.appendChild(tdPrice);
                tr.appendChild(tdBtn);

                table.appendChild(tr);
                


                
            })

            function addCart(book){
                var x = [book];

                var table = document.getElementById("cart");
           
                    x.forEach(row => {
                        var tr = document.createElement("tr");
                        var image = document.createElement("img");
                        var btn = document.createElement("button");

                        var tdImg = document.createElement("td");
                        var tdTitle = document.createElement("td");
                        var tdPrice = document.createElement("td");
                        var tdBtn = document.createElement("td");

                        btn.classList.add("waves-effect", "waves-light", "btn", "red");

                        var textTitle = document.createTextNode(row[2]);
                        var textPrice = document.createTextNode(row[3]);
                        var btnText = document.createTextNode("REMOVE");

                        image.src = row[1];
                        tdImg.appendChild(image);
                        tdTitle.appendChild(textTitle);
                        tdPrice.appendChild(textPrice);

                        btn.appendChild(btnText);
                        tdBtn.appendChild(btn);
                        btn.addEventListener('click', function(){
                            removeBtn(row);
                        })

                        tr.appendChild(image);
                        tr.appendChild(tdTitle);
                        tr.appendChild(tdPrice);
                        tr.appendChild(tdBtn);

                        table.appendChild(tr);
                    })

            }
           function removeBtn(remove){
                var re = [remove];
                
                var y = re.filter(element => element[0] == element[0]);
                console.log(y);
           }
            
            
            
            


            
       
    </script>
</body>
</html>